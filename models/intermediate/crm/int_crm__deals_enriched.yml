version: 2

models:
  - name: int_crm__deals_enriched
    description: "Enriched HubSpot deals with typed dates, deal_status and derived revenue fields."
    columns:
      - name: deal_id
        description: "Primary key for the deal (HubSpot Record ID)."
        tests:
          - not_null
          - unique
      - name: deal_status
        description: "Normalized status: open, won, lost, or closed_other."
      - name: booking_date
        description: "Date when the deal was won (only for closed-won deals)."
      - name: sales_cycle_days
        description: "Recalculated days between created_at and close_date for won deals."
      - name: won_amount_company_currency
        description: "Deal amount (company currency) for closed-won deals."
      - name: lost_amount_company_currency
        description: "Deal amount (company currency) for closed-lost deals."
